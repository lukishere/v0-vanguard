---
description: Security rules for handling API keys and secrets
alwaysApply: true
---

# Security: API Keys & Secrets Management

## üö´ NEVER Do This

- **NEVER** hardcode API keys, tokens, or secrets in any file
- **NEVER** commit `.env.local`, `.env.production`, or similar files with real secrets
- **NEVER** include real credentials in documentation, examples, or test files
- **NEVER** store secrets in:
  - `*.md` files
  - `*.js`, `*.ts`, `*.tsx` files (unless from process.env)
  - Configuration files
  - Example files
  - Test files

## ‚úÖ ALWAYS Do This

- **ALWAYS** use environment variables via `process.env.VARIABLE_NAME`
- **ALWAYS** store real secrets ONLY in:
  - `.env.local` (for local development)
  - Vercel Dashboard ‚Üí Environment Variables (for production)
  - Secure secret managers
- **ALWAYS** create `.env.example` with placeholders like:
  - `API_KEY=your_api_key_here`
  - `SECRET=xxxxxxxxxxxxxxxx`
- **ALWAYS** verify `.gitignore` includes:
  - `.env.local`
  - `.env*.local`
  - `*.env`

## üìù Safe Documentation Format

When documenting required environment variables:

```
# Required Environment Variables

NEXT_PUBLIC_FIREBASE_API_KEY=your_firebase_api_key_here
GEMINI_API_KEY=your_gemini_api_key_here
CLERK_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxx
```

## üõ°Ô∏è Code Examples

Use environment variables in code:

```typescript
// ‚úÖ CORRECT
const apiKey = process.env.GEMINI_API_KEY;

// ‚ùå WRONG
const apiKey = "AIzaSyDLCS950zSGSzzgvyO4VKBHPvmq6YWe5sk";
```

## üö® If Secrets Are Exposed

1. **Immediately revoke/regenerate** the compromised keys
2. Clean the files and replace with placeholders
3. Update production environment (Vercel)
4. Update local `.env.local`
5. Consider using git-filter-repo to clean history
